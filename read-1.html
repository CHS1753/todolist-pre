<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="board.css" rel="stylesheet">
  <script src="board.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const indexOfEqual = location.search.indexOf("=");
    const bno = +(location.search.substring(indexOfEqual+1))
    const boards = getBoards();
    const board = getBoard(boards, bno);
    // console.log(boards);
    // console.log(board);
    // console.log(bno);
    if(board===null) {
      location.href="index-1.html";
    }
  </script>
</head>
<body>
  <div id="app">
    <h1>글 읽기</h1>
    <table class="table">
      <tr>
        <td>글번호</td>
        <td><input type="text" id="bno" readonly class="form-control"></td>
      </tr>
      <tr>
        <td>제목</td>
        <td><input type="text" id="title" readonly class="form-control"></td>
      </tr>
        <td>작성자</td>
        <td><input type="text" id="nickname" readonly class="form-control"></td>
      </tr>
      <tr>
        <td colspan="2">
          <textarea class="form-control" id="content" ></textarea>
        </td>
      </tr>
    </table>
    <button onclick="location.href=`update-1.html?bno=${board.bno}`" class="btn btn-outline-success">수정하기</button>
    <button onclick="doDelete()" class="btn btn-outline-danger">삭제하기</button>
  </div>
  <script>
    render();
    
    function render() {
      const bno = document.getElementById('bno').value = board.bno;
      const title = document.getElementById('title').value = board.title;
      const nickname = document.getElementById('nickname').value = board.nickname;
      const content = document.getElementById('content').value = board.content;
    }
  
    function doDelete() {
      // alert('asda')
      for(let i=0; i<boards.length; ++i) {
        // console.log(boards.bno)
        if(boards[i].bno===bno) {
          boards.splice(i,1);
          localStorage.setItem('boards',JSON.stringify(boards))
        }
      }
      location.href="index-1.html";
    }
  </script>
</body>
</html>