<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>todos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <table class="table table-hover">
    <thead>
      <tr>
        <th>번호</th>
        <th>할일</th>
        <th>작성자</th>
        <th>작성일</th>
      </tr>
    </thead>
    <tbody id="tbody"></tbody>
  </table>
  <a href="write.html" class="btn btn-outline-primary">할일 작성하기</a>

  <script>
    //여러군데에서 필요한 todos는 시작페이지에서 만들기
    let todos = localStorage.getItem('todos');
    if(todos===null) {
      todos=[];
      localStorage.setItem('todos',JSON.stringify(todos));
    } else {
      todos = JSON.parse(todos);
    }
    
    // 테스트용 객체(mock 객체) 추가 -> 그 후 주석아니면 제거★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
    // todos = [{tno:1, title:'english', writer:'spring', writeday: '2025-08-02'},
    //         {tno:2, title:'korean', writer:'spring', writeday: '2025-08-05'}];
    // ★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
    const today = new Date();
    console.log(today.toLocaleDateString());

    //출력
    const $tbody = document.getElementById('tbody');
    let html = "";
    for (const todo of todos) {
      html += `<tr>
      <td>${todo.tno}</td>
      <td><a href="read.html? tno=${todo.tno}">${todo.title}</a></td>
      <td>${todo.writer}</td>
      <td>${todo.writedate}</td>
        </tr>`
      }
      $tbody.innerHTML = html;

  </script>
</body>
</html>