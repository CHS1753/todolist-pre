<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <title>Document</title>

  <script>
    let users = localStorage.getItem('users');
    if(users===null) {
      users = [{username:'spring',password:1234}, {username:'summer',password:1234}];
      localStorage.setItem('users',JSON.stringify(users));
    } else {
      users = JSON.parse(users);
    }
    
    const username =sessionStorage.getItem('username');
    if(username!==null) {
      location.href="index.html";
    }
  </script>
</head>

<body></body>
  <h1><strong>로그인</strong></h1>
  <input type="text" id="username">
  <input type="password" id="userpassword">
  <button onclick="login()">로그인</button>

  <script>
    const login = function() {
    const inputUsername = document.getElementById('username').value.trim();
    const inputPassword = document.getElementById('userpassword').value.trim();

    if (!inputUsername || !inputPassword) {
      alert('아이디와 비밀번호를 입력하세요.');
      return;
    }

    // 매번 최신 users를 읽어와서 비교 (다른 탭/페이지에서 바꾼 경우 대비)
    const users = JSON.parse(localStorage.getItem('users') || '[]');

    for (const user of users) {
      if (inputUsername === user.username && inputPassword === String(user.password)) {
        sessionStorage.setItem('username', inputUsername);
        location.href = "index.html";
        return;
      }
    }
    alert('로그인 실패');
    }
  </script>
<!-- 
   function login () {
    const inputUsername = document.getElementById('username').value.trim();
    const inputPassword = document.getElementById('userpassword').value.trim();

    if (!inputUsername || !inputPassword) {
      alert('아이디와 비밀번호를 입력하세요.');
      return;
    }

    // 매번 최신 users를 읽어와서 비교 (다른 탭/페이지에서 바꾼 경우 대비)
    const users = JSON.parse(localStorage.getItem('users') || '[]');

    for (const user of users) {
      if (inputUsername === user.username && inputPassword === String(user.password)) {
        sessionStorage.setItem('username', inputUsername);
        location.href = "index.html";
        return;
      }
    }
    alert('로그인 실패');
  }
</script> -->
</body>

</html>